<div id="synonym_results">
  <% @synonyms.each do |synonym| %>
    <div class="accordion-group">
      <div class="accordion-heading">
        <div class="row">
          <div class="span12">
            <div class="accordion-toggle" style="padding-bottom:30px;cursor: default">
              <div id="synonyms<%= synonym.id %>" class="pull-left">
                <span class="span2">
                  <%= synonym.name %>
                </span>
                <span class="span2" style="color:#bbb;"><i>
                  <% if @votes[synonym.id] != nil %>
                    <%= @votes[synonym.id].to_s + " " + t(:out_of) + " " + @total_votes.to_s + " " + t(:votes) %>
                  <% else %>
                    <%= "0 " + t(:out_of) + " " + @total_votes.to_s + " " + t(:votes) %> 
                  <% end %>
                </i></span>
              </div>
              <div id="buttons<%= synonym.id %>" class="pull-right">
                <% if @votes[synonym.id] != nil %>
                <button id="bstats<%= synonym.id %>" class="btn btn-mini" style="display:inline;" data-toggle="collapse" href="#collapse<%= synonym.id %>" onClick="reduce_div_height()">
                      <span><%=t(:view_stats)%></span>
                      <span style="display:none"><%=t(:hide_stats)%></span>
                      <script type="text/javascript">
                        function reduce_div_height(){
                          $('.centered_div .highcharts-container').css('height', '250px');
                        }
                      </script>
                </button>
                <%else%>
                <button id="bstats<%= synonym.id %>" class="btn btn-mini disabled why-disabled" style="display:inline;">
                <%=t(:view_stats)%>
                </button>
                <% end %>
                    <script type="text/javascript">
                      $(".why-disabled").popover({
                          placement: function () {
                            <% if I18n.locale == :ar %>
                              return "right";
                            <% else %>
                              return "left";
                            <% end %>
                          }, 
                          content :function () {
                            <% if I18n.locale == :ar %>
                             return "عفوا, لا يوجد اصوات لهذه الكلمة";
                            <% else %>
                             return "Sorry, no one voted for this synonym yet!";
                            <% end %>
                          },
                          trigger: "hover",
                          template: '<div class="popover"><div class="arrow"></div><div class="popover-inner myclass"><div class="popover-content"><p></p></div></div></div>'
                      });
                    </script>
                    <style type="text/css">
                    .myclass {
                      width:230px;
                    }
                    </style>
                <%= button_tag(:type => "submit", :class => "btn btn-mini",:style => "display:inline;") do %>
                <%= link_to t(:add_to_project), {action: "add_word", controller: "projects", project_id: @project_id, synonym_id: synonym.id, keyword: @search_keyword}, {style:"color:#000000", class: "css_class"}  %>
                <% end %>
              </div>
              <script type="text/javascript">
                <% if I18n.locale == :ar %>
                  $("#synonyms<%= synonym.id %>").attr("class", "pull-right");
                  $("#buttons<%= synonym.id %>").attr("class", "pull-left");
                <% elsif I18n.locale == :en %>
                  $("#synonyms<%= synonym.id %>").attr("class", "pull-left");
                  $("#buttons<%= synonym.id %>").attr("class", "pull-right");
                <% end %>
              </script>
              <script>
                $("#bstats<%=synonym.id%>").click(function() {
                  $("span",this).toggle();
                });
              </script>
            </div>
          </div>
        </div>
        <div id="collapse<%= synonym.id %>" class="accordion-body collapse" style="background-color:white;">
          <div class="accordion-inner">
            <% if @votes[synonym.id] != nil %>
            <% visuals = @charts.select { |f| f[synonym.id] } %>
            <% charts = visuals.first[synonym.id] %>
            <div class="centered_div" style="background-color: white; width: 880px; margin: 0 auto;" dir ="ltr">
            <div class="container-fluid">
              <div class="row-fluide">
                <div class="span2">    
                  <%= high_chart("gender_#{synonym.id}", charts[0]) do |c| %>
                    <% if I18n.locale == :ar %>
                      <%= raw "options.tooltip.formatter = function() {return '<b>'+ this.point.name +'</b>: '+'<p>'+ '%'+ this.y +'</p>';}" %>
                    <% else %>
                      <%= raw "options.tooltip.formatter = function() {return '<b>'+ this.point.name +'</b>: '+ this.y +' %';}" %>
                    <% end %>
                      <%= raw "options.plotOptions.pie.dataLabels.formatter = function() { if (this.y > 5) return this.point.name; }" %>
                  <% end %>
                </div>
                <div class="span2">    
                  <%= high_chart("country_#{synonym.id}", charts[1]) do |c| %>
                    <% if I18n.locale == :ar %>
                      <%= raw "options.tooltip.formatter = function() {return '<b>'+ this.point.name +'</b>: '+'<p>'+ '%'+ this.y +'</p>';}" %>
                    <% else %>
                      <%= raw "options.tooltip.formatter = function() {return '<b>'+ this.point.name +'</b>: '+ this.y +' %';}" %>
                    <% end %>
                      <%= raw "options.plotOptions.pie.dataLabels.formatter = function() { if (this.y > 5) return this.point.name; }" %>
                  <% end %>
                </div>
                <div class="span2">    
                  <%= high_chart("age_#{synonym.id}", charts[2]) do |c| %>
                    <%= raw "options.tooltip.formatter = function() {return '<b>'+ this.point.name +'</b>: '+ this.y +' %';}" %>
                    <%= raw "options.plotOptions.pie.dataLabels.formatter = function() { if (this.y > 5) return this.point.name; }" %>
                  <% end %>
                </div>
                <div class="span2">    
                  <%= high_chart("education_#{synonym.id}", charts[3]) do |c| %>
                    <% if I18n.locale == :ar %>
                      <%= raw "options.tooltip.formatter = function() {return '<b>'+ this.point.name +'</b>: '+'<p>'+ '%'+ this.y +'</p>';}" %>
                    <% else %>
                      <%= raw "options.tooltip.formatter = function() {return '<b>'+ this.point.name +'</b>: '+ this.y +' %';}" %>
                    <% end %>
                      <%= raw "options.plotOptions.pie.dataLabels.formatter = function() { if (this.y > 5) return this.point.name; }" %>
                  <% end %>
                </div>
              </div>
            </div>
            </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>